#include "final-score-scene.h"
#include <Arduino.h>
#include "../network-manager.h"
// #include <Arduino_FreeRTOS.h>

static const unsigned char PROGMEM WIN[] = {
    0x00, 0xe0, 0x03, 0x00, 0x00, 0xfc, 0x3e, 0x00, 0x00, 0x06, 0x60, 0x00,
    0x00, 0xf3, 0xc0, 0x00, 0x80, 0x39, 0x80, 0x01, 0xc0, 0x0e, 0x20, 0x03,
    0x40, 0x02, 0x00, 0x02, 0x60, 0x83, 0x81, 0x06, 0x60, 0xc1, 0x81, 0x06,
    0x20, 0xe1, 0x81, 0x04, 0xb0, 0x81, 0x81, 0x05, 0xa0, 0x80, 0x81, 0x0d,
    0xa0, 0x81, 0x81, 0x05, 0x20, 0x81, 0x81, 0x05, 0x60, 0xc1, 0x83, 0x04,
    0x60, 0xc1, 0xc3, 0x06, 0x40, 0x00, 0x60, 0x02, 0xc0, 0x04, 0x30, 0x03,
    0xc0, 0x01, 0x98, 0x03, 0xc0, 0x03, 0xcf, 0x03, 0x60, 0x06, 0x70, 0x06,
    0x20, 0x7c, 0x3f, 0x04, 0x30, 0xe0, 0x07, 0x0c, 0x10, 0x60, 0x02, 0x08,
    0x18, 0x60, 0x06, 0x18, 0x08, 0x30, 0x04, 0x10, 0xfc, 0x11, 0x8c, 0x3f,
    0x58, 0x19, 0x88, 0x24, 0x00, 0x0b, 0xd8, 0x00, 0x00, 0x0e, 0x70, 0x00,
    0x00, 0x06, 0x70, 0x00, 0x00, 0x06, 0x20, 0x00};

FinalScoreScene::FinalScoreScene(/* args */)
{
    type = SCORE;
}

FinalScoreScene::~FinalScoreScene()
{
}

void FinalScoreScene::render()
{
    display->setFont();
    display->setTextColor(SSD1306_WHITE);

    if (NetworkManager::getInstance()->getMyPaddle()->won())
    {
        display->setTextSize(2);
        display->setCursor(20, 40);
        display->drawXBitmap(48, 5, WIN, 32, 32, SSD1306_WHITE);
        display->println(F("YOU WIN!"));
    }
    else
    {
        display->setTextSize(3);
        display->setCursor(30, 9);
        display->println(F("GAME"));
        display->setCursor(30, 33);
        display->println(F("OVER"));
    }
    Scene::render();
}